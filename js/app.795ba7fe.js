(function(t){function e(e){for(var o,a,c=e[0],s=e[1],l=e[2],d=0,f=[];d<c.length;d++)a=c[d],Object.prototype.hasOwnProperty.call(i,a)&&i[a]&&f.push(i[a][0]),i[a]=0;for(o in s)Object.prototype.hasOwnProperty.call(s,o)&&(t[o]=s[o]);u&&u(e);while(f.length)f.shift()();return r.push.apply(r,l||[]),n()}function n(){for(var t,e=0;e<r.length;e++){for(var n=r[e],o=!0,c=1;c<n.length;c++){var s=n[c];0!==i[s]&&(o=!1)}o&&(r.splice(e--,1),t=a(a.s=n[0]))}return t}var o={},i={app:0},r=[];function a(e){if(o[e])return o[e].exports;var n=o[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,a),n.l=!0,n.exports}a.m=t,a.c=o,a.d=function(t,e,n){a.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},a.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},a.t=function(t,e){if(1&e&&(t=a(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)a.d(n,o,function(e){return t[e]}.bind(null,o));return n},a.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return a.d(e,"a",e),e},a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},a.p="/vh-webclient/";var c=window["webpackJsonp"]=window["webpackJsonp"]||[],s=c.push.bind(c);c.push=e,c=c.slice();for(var l=0;l<c.length;l++)e(c[l]);var u=s;r.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"0bfd":function(t,e,n){},"24f8":function(t,e,n){"use strict";n("0bfd")},"56d7":function(t,e,n){"use strict";n.r(e);n("e260"),n("e6cf"),n("cca6"),n("a79d");var o=n("7a23"),i={ref:"appContainer"},r={key:0,class:"ui"},a={class:"chat"},c={class:"func"},s={class:"content"},l={key:0,class:"content-vm"},u={class:"content-text"},d={key:1,class:"content-user"},f={class:"content-text"},p={ref:"hiddenScroller",style:{height:"50px"}},h={class:"input"},b={class:"textInput"},v={class:"submit"},g={class:"controls"},m={class:"control-group"},O={class:"control-group"},j={class:"control-group"},y={class:"control-group"},C=Object(o["f"])("div",{class:"nav"},[Object(o["f"])("a",{href:"https://www.pingxingyun.com/"},[Object(o["f"])("button",null,"返回首页")])],-1);function k(t,e,n,k,S,w){var x=Object(o["p"])("font-awesome-icon"),I=Object(o["p"])("Slider");return Object(o["l"])(),Object(o["e"])("div",i,[S.showUi?(Object(o["l"])(),Object(o["e"])("div",r,[Object(o["f"])("div",a,[Object(o["f"])("div",c,[Object(o["g"])(x,{icon:["fas","trash"],size:"lg",onClick:w.clearContent},null,8,["onClick"])]),Object(o["f"])("div",s,[(Object(o["l"])(!0),Object(o["e"])(o["a"],null,Object(o["o"])(S.chatContent,(function(t,e){return Object(o["l"])(),Object(o["e"])("div",{key:e},["vm"==t.type?(Object(o["l"])(),Object(o["e"])("div",l,[Object(o["g"])(x,{icon:["fas","user-astronaut"],size:"2x"}),Object(o["f"])("div",u,Object(o["q"])(t.text),1)])):(Object(o["l"])(),Object(o["e"])("div",d,[Object(o["f"])("div",f,Object(o["q"])(t.text),1),Object(o["g"])(x,{icon:["fas","user-circle"],size:"2x"})]))])})),128)),Object(o["f"])("div",p,null,512)]),Object(o["f"])("div",h,[Object(o["f"])("div",{class:Object(o["j"])(w.recodeIconClass),onMousedown:e[0]||(e[0]=function(){return w.startRecode&&w.startRecode.apply(w,arguments)}),onMouseup:e[1]||(e[1]=function(){return w.stopRecode&&w.stopRecode.apply(w,arguments)}),onMouseleave:e[2]||(e[2]=function(){return w.stopRecode&&w.stopRecode.apply(w,arguments)})},[Object(o["g"])(x,{icon:["fas","microphone"],size:"3x"})],34),Object(o["f"])("div",b,[Object(o["t"])(Object(o["f"])("input",{"onUpdate:modelValue":e[3]||(e[3]=function(t){return S.inputValue=t}),onFocus:e[4]||(e[4]=function(){return w.onInputFocus&&w.onInputFocus.apply(w,arguments)}),onBlur:e[5]||(e[5]=function(){return w.onInputBlur&&w.onInputBlur.apply(w,arguments)}),placeholder:"hi,say something to me..."},null,544),[[o["r"],S.inputValue]])]),Object(o["f"])("div",v,[Object(o["f"])("button",{onClick:e[6]||(e[6]=function(){return w.sendText&&w.sendText.apply(w,arguments)})},"发送")])])]),Object(o["f"])("div",g,[Object(o["f"])("div",m,[Object(o["g"])(I,{onChange:w.changeAngle,max:180,min:-180},null,8,["onChange"])]),Object(o["f"])("div",O,[Object(o["f"])("button",{onClick:e[7]||(e[7]=function(t){return w.changeZoom(0)})},"全身"),Object(o["f"])("button",{onClick:e[8]||(e[8]=function(t){return w.changeZoom(50)})},"半身"),Object(o["f"])("button",{onClick:e[9]||(e[9]=function(t){return w.changeZoom(100)})},"特写")]),Object(o["f"])("div",j,[Object(o["f"])("button",{onClick:e[10]||(e[10]=function(t){return w.changeAlign(0)})},"对齐左"),Object(o["f"])("button",{onClick:e[11]||(e[11]=function(t){return w.changeAlign(1)})},"对齐中"),Object(o["f"])("button",{onClick:e[12]||(e[12]=function(t){return w.changeAlign(2)})},"对齐右")]),Object(o["f"])("div",y,[Object(o["f"])("button",{onClick:e[13]||(e[13]=function(t){return w.changeBg(1)})},"背景1"),Object(o["f"])("button",{onClick:e[14]||(e[14]=function(t){return w.changeBg(2)})},"背景2"),Object(o["f"])("button",{onClick:e[15]||(e[15]=function(t){return w.changeBg(3)})},"背景3")])]),C])):Object(o["d"])("",!0)],512)}n("e9c4");var S=n("e3d4"),w=function(t){return Object(o["n"])("data-v-4b13f0e6"),t=t(),Object(o["m"])(),t},x={class:"slider",ref:"slider"},I=w((function(){return Object(o["f"])("div",{class:"slider-button"},null,-1)}));function E(t,e,n,i,r,a){return Object(o["l"])(),Object(o["e"])("div",{class:"slider-wraper",onMouseup:e[3]||(e[3]=function(){return a.onEnd&&a.onEnd.apply(a,arguments)}),onMousecancel:e[4]||(e[4]=function(){return a.onEnd&&a.onEnd.apply(a,arguments)}),onMouseleave:e[5]||(e[5]=function(){return a.onEnd&&a.onEnd.apply(a,arguments)}),onMousemove:e[6]||(e[6]=function(){return a.onMove&&a.onMove.apply(a,arguments)})},[Object(o["f"])("div",x,[Object(o["f"])("div",{class:"slider-bar",style:Object(o["k"])(a.barStyle)},null,4),Object(o["f"])("div",{class:"slider-button-wraper",style:Object(o["k"])(a.buttonWraperStyle),onMouseenter:e[0]||(e[0]=function(){return a.onEnter&&a.onEnter.apply(a,arguments)}),onMouseleave:e[1]||(e[1]=function(){return a.onLeave&&a.onLeave.apply(a,arguments)}),onMousedown:e[2]||(e[2]=function(){return a.onStart&&a.onStart.apply(a,arguments)})},[Object(o["f"])("div",{class:Object(o["j"])(a.tooltipClass)},Object(o["q"])(a.computedValue),3),I],36)],512)],32)}function T(t){if(t.getBoundingClientRect){var e=t.getBoundingClientRect();return{top:e.top,left:e.left,right:e.right,bottom:e.bottom}}return{top:0,left:0,right:0,bottom:0}}function M(t){var e=T(t);return{width:e.right-e.left,height:e.bottom-e.top}}var R={props:["min","max"],components:{},data:function(){return{tooltip:!1,value:50,sliderSize:{width:0,height:0},started:!1}},computed:{computedValue:function(){var t=this.min?this.min:0,e=this.max?this.max:100,n=e-t;return Math.round(n*this.value/100)+t},tooltipClass:function(){return this.tooltip?"slider-button-tooltip":"slider-button-tooltip hide"},barStyle:function(){return"width:"+this.value+"%"},buttonWraperStyle:function(){return"left:"+this.value+"%"}},methods:{onEnter:function(){this.tooltip=!0},onLeave:function(){this.tooltip=!1},onStart:function(){this.started=!0},onEnd:function(){this.started=!1},onMove:function(t){if(this.started&&(0==this.sliderSize.width&&this.$refs["slider"]&&(this.sliderSize=M(this.$refs["slider"])),0!=this.sliderSize.width)){var e=this.value+t.movementX/this.sliderSize.width*100;e>100||e<0||(this.value=e,this.$emit("change",this.computedValue))}}},mounted:function(){console.log("slider size",M(this.$refs["slider"])),this.$refs["slider"]&&(this.sliderSize=M(this.$refs["slider"]))}},z=(n("24f8"),n("6b0d")),V=n.n(z);const B=V()(R,[["render",E],["__scopeId","data-v-4b13f0e6"]]);var L=B,A={InitConfig:0,TextInput:1,CameraControl:2,ClientSize:3,Background:4},J={name:"App",components:{Slider:L},data:function(){return{chatContent:[],larksr:null,inputValue:"",showUi:!1,recoder:null,recodeTimer:null,savedCamera:{align:1,zoom:50,angle:0}}},computed:{recodeIconClass:function(){return null!==this.recoder?"recoding recoder":"recoder"}},methods:{startRecode:function(){console.log("start recode"),this.larksr.startAiDmVoiceInput()},stopRecode:function(){console.log("stop recode"),this.larksr.stopAiDmVoiceInput()},pauseRecode:function(){this.larksr.stopAiDmVoiceInput()},vmOutput:function(t,e){this.chatContent.push({id:t,type:"vm",text:e}),this.$refs.hiddenScroller.scrollIntoView({behavior:"smooth"})},userInput:function(t,e){for(var n=!1,o=this.chatContent.length-1;o>=0;o--)this.chatContent[o].id==t&&(this.chatContent[o].text=e,n=!0);n||this.chatContent.push({id:t,type:"user",text:e}),this.$refs.hiddenScroller.scrollIntoView({behavior:"smooth"})},clearContent:function(){this.chatContent=[]},onInputFocus:function(){var t;console.log("onInputFocus",this.larksr.op.setKeyboardEnable),null===(t=this.larksr)||void 0===t||t.op.setKeyboardEnable(!1)},onInputBlur:function(){var t;console.log("onInputBlur"),null===(t=this.larksr)||void 0===t||t.op.setKeyboardEnable(!0)},sendInitConfig:function(){var t;null===(t=this.larksr)||void 0===t||t.sendTextToDataChannel(JSON.stringify({type:A.InitConfig,data:{background:1,hair:1,clothing:1}}))},sendText:function(){if(this.inputValue){var t=this.larksr.aiDmTextInput(this.inputValue);this.userInput(t,this.inputValue),this.inputValue=""}else console.log("input empty")},changeBg:function(t){var e;null===(e=this.larksr)||void 0===e||e.sendTextToDataChannel(JSON.stringify({type:A.Background,data:{backgound:t}}))},changeAngle:function(t){var e;this.savedCamera.angle=t,null===(e=this.larksr)||void 0===e||e.sendTextToDataChannel(JSON.stringify({type:A.CameraControl,data:this.savedCamera}))},changeZoom:function(t){var e;this.savedCamera.zoom=t,null===(e=this.larksr)||void 0===e||e.sendTextToDataChannel(JSON.stringify({type:A.CameraControl,data:this.savedCamera}))},changeAlign:function(t){var e;this.savedCamera.align=t,null===(e=this.larksr)||void 0===e||e.sendTextToDataChannel(JSON.stringify({type:A.CameraControl,data:this.savedCamera}))},clientSize:function(t,e){var n;null===(n=this.larksr)||void 0===n||n.sendTextToDataChannel(JSON.stringify({type:A.ClientSize,data:{platform:"win32",width:t,height:e,scale:1}}))}},mounted:function(){var t=this,e=new S["LarkSR"]({rootElement:this.$refs["appContainer"],serverAddress:"http://192.168.0.55:8181/",authCode:"29b8347a75cc44898fc312e177a857af",scaleMode:"contain",fullScreenMode:0,loadingBgUrl:"https://home-obs.pingxingyun.com/homePage_4_0/bg.jpg"});console.log("larksr",e,Object(S["LoadAppliParamsFromUrl"])()),e.connect({appliId:"911273233334927360"}),e.on("connect",(function(t){console.log("LarkSRClientEvent CONNECT",t)})),e.on("gotremotesteam",(function(t){console.log("LarkSRClientEvent gotremotesteam",t)})),e.on("meidaloaded",(function(e){console.log("LarkSRClientEvent meidaloaded",e),t.showUi=!0})),e.on("mediaplaysuccess",(function(t){console.log("LarkSRClientEvent mediaplaysuccess",t)})),e.on("mediaplayfailed",(function(t){console.log("LarkSRClientEvent mediaplayfailed",t)})),e.on("meidaplaymute",(function(t){console.log("LarkSRClientEvent meidaplaymute",t)})),e.on("datachannelopen",(function(n){console.log("datachannel open",n),t.clientSize(e.screenState.viewPort.width,e.screenState.viewPort.height),t.sendInitConfig()})),e.on("datachanneltext",(function(t){console.log("datachanneltext",t)})),console.log("load appli success",this.larksr),e.on("error",(function(t){console.error("LarkSRClientEvent error",t),alert(JSON.stringify(t.message))})),e.on("info",(function(t){console.log("LarkSRClientEvent info",t)})),e.on("aivoicestatus",(function(e){console.log("aivoicestatus",e),t.vmOutput(0,JSON.stringify(e.data))})),e.on("aivoiceasrresult",(function(e){console.log("aivoiceasrresult",e.data),t.userInput(e.data.voiceId,e.data.text)})),e.on("aivoicedmresult",(function(e){try{var n=JSON.parse(e.data.text);console.log("aivoicedmresult",n),t.vmOutput(e.data.voiceId,n.dm.nlg)}catch(e){console.warn("parse aivoicedmresult failed",e.data)}})),e.on("aivoiceerror",(function(t){console.warn("aivoiceerror",t),alert(JSON.stringify(t.data))})),this.larksr=e},beforeUnmount:function(){this.larksr.app.disConnect(),this.larksr=null}};n("64cf");const N=V()(J,[["render",k]]);var P=N,D=(n("e6c6"),n("ecee")),_=n("c074"),$=n("ad3d");D["c"].add(_["c"],_["b"],_["a"],_["d"],_["f"],_["e"]),Object(o["c"])(P).component("font-awesome-icon",$["a"]).mount("#app")},"64cf":function(t,e,n){"use strict";n("d3ec")},d3ec:function(t,e,n){},e6c6:function(t,e,n){}});